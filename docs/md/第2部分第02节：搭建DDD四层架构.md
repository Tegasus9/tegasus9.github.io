关于这一节的相关知识学习其实自己也期待了很久，之前微信各种公众号上铺天盖地的有很多恰饭文章，诸如“EPR已死，中台已凉，DDD称王”这样鼓吹的文章数不胜数，一开始还会很好奇DDD到底有多神奇，但每次点进去又无一不是卖课类视频，从里面获得的信息少之又少，今天借着小傅哥抽奖系统的好机会，可以好好了解一下DDD到底是一个什么好东西。


**第2部分第02节：搭建DDD四层架构**
以下内容均结合了小傅哥的文章和一些百度资料，如果有不对或感到迷惑的地方欢迎大家对其中内容进行指正和建议。
# 今日学习
---
## DDD（Domain-Driven Design 领域驱动设计）
DDD共有四层模型：
**领域层**：主要实现领域服务，用来放置一些聚合的、充血的模型。
**基础层**：主要提供基础服务，如Redis，Sql，es
**接口层**：用来给RPC调用，处理用户请求并将信息传递给应用层进行处理
**应用层**：用来实现业务逻辑。

---
由于这里作者并不简单清楚什么是***充血模型和贫血模型***，于是又自行百度学习了一波，也是分享给大家。
## 领域模型
**失血模型**：模型中只有get和set方法，业务逻辑和应用逻辑一般放在服务层。也就是POJO。
**贫血模型**：模型中除了有get和set方法之外，还有一些**不包含持久层依赖**的业务逻辑。
**充血模型**：包含了所有的业务逻辑，包括**持久层依赖**。
**胀血模型**：除了所有业务逻辑之外，还将所有的应用逻辑也放入模型中。

---
## 模块分层
代码中，在lottery包下一共有6个模块，分别是**应用层模块，基础层模块，领域层模块，接口层模块，公共层模块和rpc层模块**。

小傅哥最后提到的将rpc层单独出来的原因，结合小傅哥解释按照我的个人理解来看将rpc层单独分离出来，**可以方便内部接口层使用，同时也方便暴露接口给外部调用。**


# 一些其他思考：
- 文章和视频里并没有提到具体的module建立细节，自己也没有过相关多模块项目搭建的经验，所以刚开始新建代码的时候把所有的模块都用springboot工程无脑下一步，后来才发现似乎并不是所有的模块都需要作为一个应用来启动，而是作为代码被其他模块所调用。于是自己又删掉除了接口层以外的项目，重新新建为maven项目。最终才完成今天的代码作业。顺便，还在每个项目中的src/java目录下新增一个空类。如果没有这个文件的话，commit的时候不会显示新增这个目录，**只有目录中有文件的时候，这个文件所在的目录才会被一并上传上去。**（也许可以进行相关设置，~~但是总归还是先建点什么把目录上传上去不然浑身不舒服。~~）

- 自研路由的打包用的是maven的install功能。在IDEA的maven界面中，lifecycle和plugins中都各自拥有一个install功能。如图![](https://my-first-picture-bed.oss-cn-guangzhou.aliyuncs.com/pic-bed/202202281928589.png)但是自己并不清楚两个install的区别。于是随便挑选了一个比较顺眼的开始try一try。第一次选择的是plugins里的install，很幸运的，报错了。![](https://my-first-picture-bed.oss-cn-guangzhou.aliyuncs.com/pic-bed/202202281931765.png)第二次选择的是lifecycle的install，并没有什么波折，直接就打包完成。然后再回到lottery项目中，reload maven一下，就没有缺少组件的报错了。至于为什么plugins中的install会报错，作者暂时没有进行相关深入研究。（~~虽然本质上来说了解一下这两个的区别总是好的，但是现在哪个能用用哪个啦~~）

总结一下：感觉今天学的还不错。起码让工程从0到1，明天也要继续加油！